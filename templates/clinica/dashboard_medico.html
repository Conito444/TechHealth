{% load static %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<header>
    <h1>Gestión Clínica TechHealth</h1>
</header>

<main>
    <section class="module">
        <h2>Dashboard Médico - Mis Atenciones</h2>
        <h3>Fecha: {{ fecha_hoy }}</h3>

        <hr>
        
        <h3>Citas Pendientes</h3>
        {% if citas_pendientes %}
            <table class="data-grid">
                <thead>
                    <tr>
                        <th>Hora</th>
                        <th>Paciente</th>
                        <th>RUT</th>
                        <th>Especialidad</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cita in citas_pendientes %}
                    <tr>
                        <td>{{ cita.fecha_hora|time:"H:i" }}</td>
                        <td>{{ cita.paciente.nombre_completo }}</td>
                        <td>{{ cita.paciente.rut }}</td>
                        <td>{{ cita.especialidad }}</td>
                        <td>
                            <a href="{% url 'iniciar_atencion' cita.id %}" class="button primary">
                                Iniciar Atención
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No tiene citas pendientes para hoy.</p>
        {% endif %}

        <hr>

        <h3>Citas Completadas</h3>
        {% if citas_completadas %}
            <table class="data-grid">
                <thead>
                    <tr>
                        <th>Hora</th>
                        <th>Paciente</th>
                        <th>RUT</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cita in citas_completadas %}
                    <tr>
                        <td>{{ cita.fecha_hora|time:"H:i" }}</td>
                        <td>{{ cita.paciente.nombre_completo }}</td>
                        <td>{{ cita.paciente.rut }}</td>
                        <td>
                            <a href="{% url 'iniciar_atencion' cita.id %}" class="button">
                                Ver/Editar Ficha
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No ha completado citas hoy.</p>
        {% endif %}

    </section>
</main>

<style>
    .data-grid {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    .data-grid th, .data-grid td {
        border: 1px solid #ccc;
        padding: 8px 12px;
        text-align: left;
    }
    .data-grid th {
        background-color: #f4f4f4;
    }
</style>